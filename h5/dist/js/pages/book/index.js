"use strict";!function(){var n=!1,i=[],l=[],r=[],a=[];function d(){window.tool.addClass($("#bookList"),"select"),$("#editFooter").style.display="block",$("#editHeader").style.display="block",n=!0}function o(o){var t=0,e=l.length;if(o)for(i=JSON.parse(JSON.stringify(l)),$("#allSelect").innerText="取消全选";t<e;t++)r.push(a[t]),window.tool.addClass(a[t],"act");else for(i=[],r=[],$("#allSelect").innerText="全选";t<e;t++)window.tool.removeClass(a[t],"act");$("#bookCount").innerText=i.length}function s(){window.tool.removeClass($("#bookList"),"select"),$("#editFooter").style.display="none",$("#editHeader").style.display="none",n=!1,o()}function c(){l.length==i.length?o():o(!0)}function u(){for(var o=0,t=r.length;o<t;o++)r[o].remove();if(a=$(".book-info"),l.removeArr(i),window.tool.setCookie("bookIds",l.join(",")),0==l.length)return $("#bookList").remove(),$("#edit").remove(),$("#allSelect").innerText="",$(".no-book")[0].style.display="flex",void s()}window.addEventListener("load",function(){!function(){a=$(".book-info");var o=0,t=a.length;for(;o<t;o++)l.push(a[o].getAttribute("book-id"));var e=$(".book-list")[0];if(!e)return;window.touchEvent.tap(e,function(o){!function(o){if(!o)return;n?(window.tool.hasClass(o,"act")?(i.remove(o.getAttribute("book-id")),r.remove(o),window.tool.removeClass(o,"act")):(i.push(o.getAttribute("book-id")),r.push(o),window.tool.addClass(o,"act")),$("#bookCount").innerText=i.length,l.length==i.length?$("#allSelect").innerText="取消全选":$("#allSelect").innerText="全选"):location.href="/book/info?bookId="+o.getAttribute("book-id")}(window.tool.returnTarget(o,e,"a"))}),window.touchEvent.tap($("#edit"),d),window.touchEvent.tap($("#cancel"),s),window.touchEvent.tap($("#allSelect"),c),window.touchEvent.tap($("#editFooter"),u)}()})}();